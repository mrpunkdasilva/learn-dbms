<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#E8488B"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-05-13T23:07:47.174260422"><title>Integridade Referencial | Database Management Systems: A Complete Guide</title><script type="application/json" id="virtual-toc-data">[{"id":"conceitos-fundamentais","level":0,"title":"Conceitos Fundamentais","anchor":"#conceitos-fundamentais"},{"id":"regras-de-integridade","level":0,"title":"Regras de Integridade","anchor":"#regras-de-integridade"},{"id":"implementa-o","level":0,"title":"Implementação","anchor":"#implementa-o"},{"id":"cen-rios-comuns","level":0,"title":"Cenários Comuns","anchor":"#cen-rios-comuns"},{"id":"boas-pr-ticas","level":0,"title":"Boas Práticas","anchor":"#boas-pr-ticas"},{"id":"tratamento-de-erros","level":0,"title":"Tratamento de Erros","anchor":"#tratamento-de-erros"},{"id":"monitoramento","level":0,"title":"Monitoramento","anchor":"#monitoramento"},{"id":"considera-es-avan-adas","level":0,"title":"Considerações Avançadas","anchor":"#considera-es-avan-adas"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link href="static/custom.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="images/logo-primary.svg"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Integridade Referencial | Database Management Systems: A Complete Guide"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Database Management Systems: A Complete Guide Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/referential-integrity.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Integridade Referencial | Database Management Systems: A Complete Guide"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/referential-integrity.html#webpage",
    "url": "writerside-documentation/referential-integrity.html",
    "name": "Integridade Referencial | Database Management Systems: A Complete Guide",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Database Management Systems: A Complete Guide Help"
}</script><!-- End Schema.org --></head><body data-id="referential-integrity" data-main-title="Integridade Referencial" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="data-modeling.md|Modelagem de Dados///logical-modeling.md|Modelagem Lógica///relational-model.md|Modelo Relacional///relational-concepts.md|Conceitos do Modelo Relacional"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Database Management Systems: A Complete Guide  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="referential-integrity" id="referential-integrity.md">Integridade Referencial</h1><section class="chapter"><h2 id="conceitos-fundamentais" data-toc="conceitos-fundamentais">Conceitos Fundamentais</h2><section class="chapter"><h3 id="defini-o" data-toc="defini-o">Defini&ccedil;&atilde;o</h3><p id="qhpkkc_12">A integridade referencial garante que relacionamentos entre tabelas permane&ccedil;am consistentes.</p><svg aria-roledescription="mindmap" role="graphics-document document" viewBox="5 5 566.4860229492188 384.33819580078125" style="max-width: 566.4860229492188px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><g class="mindmap-edges"><path class="edge section-edge-0 edge-depth-1" d="M 278.8921284670836,273.5431242213551 L 332.54890804654553,280.8897624551998 L386.2056876260075,288.2364006890445"></path><path class="edge section-edge-0 edge-depth-1" d="M 262.172205173282,286.39273302621586 L 258.4166143216537,316.4693582007732 L254.6610234700254,346.5459833753305"></path><path class="edge section-edge-0 edge-depth-1" d="M 249.10325498622717,272.98104029617446 L 179.08570414461087,279.8888227623498 L109.06815330299457,286.7966052285251"></path><path class="edge section-edge-0 edge-depth-0" d="M 288.92759549990245,197.94863794864713 L 278.88363369569277,227.6243511327287 L268.8396718914831,257.3000643168103"></path><path class="edge section-edge-1 edge-depth-1" d="M 357.12884841272637,102.42583732354706 L 309.9577913957962,78.90716422524795 L262.7867343788661,55.38849112694885"></path><path class="edge section-edge-1 edge-depth-1" d="M 380.7336612318907,98.10286218115027 L 405.7694732720147,71.01331439476226 L430.80528531213866,43.92376660837424"></path><path class="edge section-edge-1 edge-depth-1" d="M 385.21532728166534,112.2829897437865 L 442.70970626841495,124.69032604417768 L500.20408525516456,137.09766234456887"></path><path class="edge section-edge-1 edge-depth-0" d="M 304.4956787697075,173.2885989310428 L 332.1446710354712,146.4295982067729 L359.7936633012349,119.57059748250302"></path></g><g class="mindmap-nodes"><g transform="translate(200.7364841021638, 165.8325676240213)" class="mindmap-node section--1 section-root"><g transform="translate(93, 17.9078125)"><circle r="93" class="node-bkg node-circle" id="node-0"></circle></g><g transform="translate(93, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Integridade</tspan><tspan font-weight="normal" class="text-inner-tspan" font-style="normal"> Referencial</tspan></tspan></text></g></g></g><g transform="translate(228.16359578922174, 253.6005096414361)" class="mindmap-node section-0"><g><path d="M0 30.815624999999997 v-25.815624999999997 q0,-5 5,-5 h61.734375 q5,0 5,5 v30.815624999999997 H0 Z" class="node-bkg node-no-border" id="node-1"></path><line y2="35.815625" x2="71.734375" y1="35.815625" x1="0" class="node-line-0"></line></g><g transform="translate(35.8671875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Regras</tspan></tspan></text></g></g></g><g transform="translate(327.09192046877865, 91.21100378952451)" class="mindmap-node section-1"><g><path d="M0 30.815624999999997 v-25.815624999999997 q0,-5 5,-5 h76.921875 q5,0 5,5 v30.815624999999997 H0 Z" class="node-bkg node-no-border" id="node-5"></path><line y2="35.815625" x2="86.921875" y1="35.815625" x1="0" class="node-line-1"></line></g><g transform="translate(43.4609375, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Objetivos</tspan></tspan></text></g></g></g><g transform="translate(354.4473085301877, 272.3633902689635)" class="mindmap-node section-0"><g><path d="M0 30.815624999999997 v-25.815624999999997 q0,-5 5,-5 h83.23944854736328 q5,0 5,5 v30.815624999999997 H0 Z" class="node-bkg node-no-border" id="node-2"></path><line y2="35.815625" x2="93.23944854736328" y1="35.815625" x1="0" class="node-line-0"></line></g><g transform="translate(46.61972427368164, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Existência</tspan></tspan></text></g></g></g><g transform="translate(196.81887906990596, 343.52258176011026)" class="mindmap-node section-0"><g><path d="M0 30.815624999999997 v-25.815624999999997 q0,-5 5,-5 h101.96713256835938 q5,0 5,5 v30.815624999999997 H0 Z" class="node-bkg node-no-border" id="node-3"></path><line y2="35.815625" x2="111.96713256835938" y1="35.815625" x1="0" class="node-line-0"></line></g><g transform="translate(55.98356628417969, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Consistência</tspan></tspan></text></g></g></g><g transform="translate(15, 270.36151088326346)" class="mindmap-node section-0"><g><path d="M0 30.815624999999997 v-25.815624999999997 q0,-5 5,-5 h148.28125 q5,0 5,5 v30.815624999999997 H0 Z" class="node-bkg node-no-border" id="node-4"></path><line y2="35.815625" x2="158.28125" y1="35.815625" x1="0" class="node-line-0"></line></g><g transform="translate(79.140625, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Ações</tspan><tspan font-weight="normal" class="text-inner-tspan" font-style="normal"> Referenciais</tspan></tspan></text></g></g></g><g transform="translate(193.3791585386341, 30.787699660971384)" class="mindmap-node section-1"><g><path d="M0 30.815624999999997 v-25.815624999999997 q0,-5 5,-5 h101.96713256835938 q5,0 5,5 v30.815624999999997 H0 Z" class="node-bkg node-no-border" id="node-6"></path><line y2="35.815625" x2="111.96713256835938" y1="35.815625" x1="0" class="node-line-1"></line></g><g transform="translate(55.98356628417969, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Consistência</tspan></tspan></text></g></g></g><g transform="translate(380.076180280573, 15)" class="mindmap-node section-1"><g><path d="M0 30.815624999999997 v-25.815624999999997 q0,-5 5,-5 h111.81981658935547 q5,0 5,5 v30.815624999999997 H0 Z" class="node-bkg node-no-border" id="node-7"></path><line y2="35.815625" x2="121.81981658935547" y1="35.815625" x1="0" class="node-line-1"></line></g><g transform="translate(60.909908294677734, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Confiabilidade</tspan></tspan></text></g></g></g><g transform="translate(468.2471163966645, 122.35402329883084)" class="mindmap-node section-1"><g><path d="M0 30.815624999999997 v-25.815624999999997 q0,-5 5,-5 h83.23887634277344 q5,0 5,5 v30.815624999999997 H0 Z" class="node-bkg node-no-border" id="node-8"></path><line y2="35.815625" x2="93.23887634277344" y1="35.815625" x1="0" class="node-line-1"></line></g><g transform="translate(46.61943817138672, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Qualidade</tspan></tspan></text></g></g></g></g></svg></section></section><section class="chapter"><h2 id="regras-de-integridade" data-toc="regras-de-integridade">Regras de Integridade</h2><section class="chapter"><h3 id="1-regra-de-exist-ncia" data-toc="1-regra-de-exist-ncia">1. Regra de Exist&ecirc;ncia</h3><ul class="list _bullet" id="qhpkkc_17"><li class="list__item" id="qhpkkc_18"><p id="qhpkkc_20">FK deve corresponder a PK v&aacute;lida</p></li><li class="list__item" id="qhpkkc_19"><p id="qhpkkc_21">Ou ser NULL (se permitido)</p></li></ul></section><section class="chapter"><h3 id="2-regra-de-modifica-o" data-toc="2-regra-de-modifica-o">2. Regra de Modifica&ccedil;&atilde;o</h3><ul class="list _bullet" id="qhpkkc_22"><li class="list__item" id="qhpkkc_23"><p id="qhpkkc_25">Atualiza&ccedil;&otilde;es devem manter consist&ecirc;ncia</p></li><li class="list__item" id="qhpkkc_24"><p id="qhpkkc_26">Dele&ccedil;&otilde;es devem ser controladas</p></li></ul></section><section class="chapter"><h3 id="3-a-es-referenciais" data-toc="3-a-es-referenciais">3. A&ccedil;&otilde;es Referenciais</h3><section class="chapter"><h4 id="on-delete" data-toc="on-delete">ON DELETE</h4><ul class="list _bullet" id="qhpkkc_30"><li class="list__item" id="qhpkkc_31"><p id="qhpkkc_35">CASCADE: Deleta registros relacionados</p></li><li class="list__item" id="qhpkkc_32"><p id="qhpkkc_36">SET NULL: Define FK como NULL</p></li><li class="list__item" id="qhpkkc_33"><p id="qhpkkc_37">RESTRICT: Impede dele&ccedil;&atilde;o</p></li><li class="list__item" id="qhpkkc_34"><p id="qhpkkc_38">NO ACTION: Comportamento padr&atilde;o</p></li></ul></section><section class="chapter"><h4 id="on-update" data-toc="on-update">ON UPDATE</h4><ul class="list _bullet" id="qhpkkc_39"><li class="list__item" id="qhpkkc_40"><p id="qhpkkc_44">CASCADE: Atualiza registros relacionados</p></li><li class="list__item" id="qhpkkc_41"><p id="qhpkkc_45">SET NULL: Define FK como NULL</p></li><li class="list__item" id="qhpkkc_42"><p id="qhpkkc_46">RESTRICT: Impede atualiza&ccedil;&atilde;o</p></li><li class="list__item" id="qhpkkc_43"><p id="qhpkkc_47">NO ACTION: Comportamento padr&atilde;o</p></li></ul></section></section></section><section class="chapter"><h2 id="implementa-o" data-toc="implementa-o">Implementa&ccedil;&atilde;o</h2><section class="chapter"><h3 id="1-sql-ddl" data-toc="1-sql-ddl">1. SQL DDL</h3><div class="code-block" data-lang="sql">
CREATE TABLE Pedido (
    id SERIAL PRIMARY KEY,
    cliente_id INTEGER,
    data DATE,
    FOREIGN KEY (cliente_id) 
        REFERENCES Cliente(id)
        ON DELETE RESTRICT
        ON UPDATE CASCADE
);
</div></section><section class="chapter"><h3 id="2-constraints-deferidas" data-toc="2-constraints-deferidas">2. Constraints Deferidas</h3><div class="code-block" data-lang="sql">
CREATE TABLE ItemPedido (
    pedido_id INTEGER,
    produto_id INTEGER,
    quantidade INTEGER,
    FOREIGN KEY (pedido_id) 
        REFERENCES Pedido(id)
        DEFERRABLE INITIALLY DEFERRED
);
</div></section></section><section class="chapter"><h2 id="cen-rios-comuns" data-toc="cen-rios-comuns">Cen&aacute;rios Comuns</h2><section class="chapter"><h3 id="1-relacionamentos-pai-filho" data-toc="1-relacionamentos-pai-filho">1. Relacionamentos Pai-Filho</h3><svg aria-roledescription="er" role="graphics-document document" viewBox="0 0 191.7111358642578 314" style="max-width: 191.7111358642578px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="0" id="MD_PARENT_START"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="19" id="MD_PARENT_END"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="18" refY="9" refX="0" id="ONLY_ONE_START"><path d="M9,0 L9,18 M15,0 L15,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="18" refY="9" refX="18" id="ONLY_ONE_END"><path d="M3,0 L3,18 M9,0 L9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="30" refY="9" refX="0" id="ZERO_OR_ONE_START"><circle r="6" cy="9" cx="21" fill="white" stroke="gray"></circle><path d="M9,0 L9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="30" refY="9" refX="30" id="ZERO_OR_ONE_END"><circle r="6" cy="9" cx="9" fill="white" stroke="gray"></circle><path d="M21,0 L21,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="45" refY="18" refX="18" id="ONE_OR_MORE_START"><path d="M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="45" refY="18" refX="27" id="ONE_OR_MORE_END"><path d="M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="57" refY="18" refX="18" id="ZERO_OR_MORE_START"><circle r="6" cy="18" cx="48" fill="white" stroke="gray"></circle><path d="M0,18 Q18,0 36,18 Q18,36 0,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="57" refY="18" refX="39" id="ZERO_OR_MORE_END"><circle r="6" cy="18" cx="9" fill="white" stroke="gray"></circle><path d="M21,18 Q39,0 57,18 Q39,36 21,18" fill="none" stroke="gray"></path></marker></defs><path style="stroke: gray; fill: none;" marker-start="url(#ONLY_ONE_START)" marker-end="url(#ZERO_OR_MORE_END)" d="M95.856,86L95.856,94.333C95.856,102.667,95.856,119.333,95.856,136C95.856,152.667,95.856,169.333,95.856,177.667L95.856,186" class="er relationshipLine"></path><g transform="translate(31.808692932128906,20 )" id="entity-DEPARTAMENTO-14c3ef94-bc6e-5ac2-bd22-9535eac2d9d8"><rect height="66" width="128.09375" y="0" x="0" class="er entityBox"></rect><text transform="translate(64.046875,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-DEPARTAMENTO-14c3ef94-bc6e-5ac2-bd22-9535eac2d9d8" class="er entityLabel">DEPARTAMENTO</text><rect height="21" width="46.372178395589195" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DEPARTAMENTO-14c3ef94-bc6e-5ac2-bd22-9535eac2d9d8-attr-1-type" class="er entityLabel">int</text><rect height="21" width="46.89623006184896" y="24" x="46.372178395589195" class="er attributeBoxOdd"></rect><text transform="translate(51.372178395589195,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DEPARTAMENTO-14c3ef94-bc6e-5ac2-bd22-9535eac2d9d8-attr-1-name" class="er entityLabel">id</text><rect height="21" width="34.82534154256185" y="24" x="93.26840845743816" class="er attributeBoxOdd"></rect><text transform="translate(98.26840845743816,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DEPARTAMENTO-14c3ef94-bc6e-5ac2-bd22-9535eac2d9d8-attr-1-key" class="er entityLabel">PK</text><rect height="21" width="46.372178395589195" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DEPARTAMENTO-14c3ef94-bc6e-5ac2-bd22-9535eac2d9d8-attr-2-type" class="er entityLabel">string</text><rect height="21" width="46.89623006184896" y="45" x="46.372178395589195" class="er attributeBoxEven"></rect><text transform="translate(51.372178395589195,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DEPARTAMENTO-14c3ef94-bc6e-5ac2-bd22-9535eac2d9d8-attr-2-name" class="er entityLabel">nome</text><rect height="21" width="34.82534154256185" y="45" x="93.26840845743816" class="er attributeBoxEven"></rect><text transform="translate(98.26840845743816,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DEPARTAMENTO-14c3ef94-bc6e-5ac2-bd22-9535eac2d9d8-attr-2-key" class="er entityLabel"></text></g><g transform="translate(20,186 )" id="entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06"><rect height="108" width="151.7111415863037" y="0" x="0" class="er entityBox"></rect><text transform="translate(75.85557079315186,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06" class="er entityLabel">FUNCIONARIO</text><rect height="21" width="68.7015609741211" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-1-type" class="er entityLabel">int</text><rect height="21" width="59.19059753417969" y="24" x="68.7015609741211" class="er attributeBoxOdd"></rect><text transform="translate(73.7015609741211,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-1-name" class="er entityLabel">id</text><rect height="21" width="23.81898307800293" y="24" x="127.89215850830078" class="er attributeBoxOdd"></rect><text transform="translate(132.89215850830078,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-1-key" class="er entityLabel">PK</text><rect height="21" width="68.7015609741211" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-2-type" class="er entityLabel">string</text><rect height="21" width="59.19059753417969" y="45" x="68.7015609741211" class="er attributeBoxEven"></rect><text transform="translate(73.7015609741211,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-2-name" class="er entityLabel">nome</text><rect height="21" width="23.81898307800293" y="45" x="127.89215850830078" class="er attributeBoxEven"></rect><text transform="translate(132.89215850830078,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-2-key" class="er entityLabel"></text><rect height="21" width="68.7015609741211" y="66" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-3-type" class="er entityLabel">int</text><rect height="21" width="59.19059753417969" y="66" x="68.7015609741211" class="er attributeBoxOdd"></rect><text transform="translate(73.7015609741211,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-3-name" class="er entityLabel">depto_id</text><rect height="21" width="23.81898307800293" y="66" x="127.89215850830078" class="er attributeBoxOdd"></rect><text transform="translate(132.89215850830078,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-3-key" class="er entityLabel">FK</text><rect height="21" width="68.7015609741211" y="87" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-4-type" class="er entityLabel">ON-DELETE</text><rect height="21" width="59.19059753417969" y="87" x="68.7015609741211" class="er attributeBoxEven"></rect><text transform="translate(73.7015609741211,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-4-name" class="er entityLabel">SET-NULL</text><rect height="21" width="23.81898307800293" y="87" x="127.89215850830078" class="er attributeBoxEven"></rect><text transform="translate(132.89215850830078,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-FUNCIONARIO-7a22ad77-f12b-571d-a83b-148fa4755f06-attr-4-key" class="er entityLabel"></text></g><rect height="14" width="47.831504821777344" y="129" x="71.94025039672852" class="er relationshipLabelBox"></rect><text style="text-anchor: middle; dominant-baseline: middle; font-size: 12px;" y="136" x="95.85600280761719" id="rel1106" class="er relationshipLabel">emprega</text></svg></section><section class="chapter"><h3 id="2-relacionamentos-muitos-para-muitos" data-toc="2-relacionamentos-muitos-para-muitos">2. Relacionamentos Muitos-para-Muitos</h3><svg aria-roledescription="er" role="graphics-document document" viewBox="0 0 398.0697021484375 293" style="max-width: 398.0697021484375px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="0" id="MD_PARENT_START"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="19" id="MD_PARENT_END"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="18" refY="9" refX="0" id="ONLY_ONE_START"><path d="M9,0 L9,18 M15,0 L15,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="18" refY="9" refX="18" id="ONLY_ONE_END"><path d="M3,0 L3,18 M9,0 L9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="30" refY="9" refX="0" id="ZERO_OR_ONE_START"><circle r="6" cy="9" cx="21" fill="white" stroke="gray"></circle><path d="M9,0 L9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="30" refY="9" refX="30" id="ZERO_OR_ONE_END"><circle r="6" cy="9" cx="9" fill="white" stroke="gray"></circle><path d="M21,0 L21,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="45" refY="18" refX="18" id="ONE_OR_MORE_START"><path d="M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="45" refY="18" refX="27" id="ONE_OR_MORE_END"><path d="M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="57" refY="18" refX="18" id="ZERO_OR_MORE_START"><circle r="6" cy="18" cx="48" fill="white" stroke="gray"></circle><path d="M0,18 Q18,0 36,18 Q18,36 0,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="57" refY="18" refX="39" id="ZERO_OR_MORE_END"><circle r="6" cy="18" cx="9" fill="white" stroke="gray"></circle><path d="M21,18 Q39,0 57,18 Q39,36 21,18" fill="none" stroke="gray"></path></marker></defs><path style="stroke: gray; fill: none;" marker-start="url(#ZERO_OR_MORE_START)" marker-end="url(#ZERO_OR_MORE_END)" d="M70,96.5L70,106.583C70,116.667,70,136.833,70,155.25C70,173.667,70,190.333,70,198.667L70,207" class="er relationshipLine"></path><g transform="translate(20,30.5 )" id="entity-ALUNO-42b2214a-1953-515c-a18c-18ed0abcd001"><rect height="66" width="100" y="0" x="0" class="er entityBox"></rect><text transform="translate(50,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-ALUNO-42b2214a-1953-515c-a18c-18ed0abcd001" class="er entityLabel">ALUNO</text><rect height="21" width="37.00759506225586" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ALUNO-42b2214a-1953-515c-a18c-18ed0abcd001-attr-1-type" class="er entityLabel">int</text><rect height="21" width="37.531646728515625" y="24" x="37.00759506225586" class="er attributeBoxOdd"></rect><text transform="translate(42.00759506225586,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ALUNO-42b2214a-1953-515c-a18c-18ed0abcd001-attr-1-name" class="er entityLabel">id</text><rect height="21" width="25.460758209228516" y="24" x="74.53924179077148" class="er attributeBoxOdd"></rect><text transform="translate(79.53924179077148,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ALUNO-42b2214a-1953-515c-a18c-18ed0abcd001-attr-1-key" class="er entityLabel">PK</text><rect height="21" width="37.00759506225586" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ALUNO-42b2214a-1953-515c-a18c-18ed0abcd001-attr-2-type" class="er entityLabel">string</text><rect height="21" width="37.531646728515625" y="45" x="37.00759506225586" class="er attributeBoxEven"></rect><text transform="translate(42.00759506225586,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ALUNO-42b2214a-1953-515c-a18c-18ed0abcd001-attr-2-name" class="er entityLabel">nome</text><rect height="21" width="25.460758209228516" y="45" x="74.53924179077148" class="er attributeBoxEven"></rect><text transform="translate(79.53924179077148,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ALUNO-42b2214a-1953-515c-a18c-18ed0abcd001-attr-2-key" class="er entityLabel"></text></g><g transform="translate(20,207 )" id="entity-DISCIPLINA-17ed74ad-2ce5-509a-a0d9-16ab72cb11ad"><rect height="66" width="100" y="0" x="0" class="er entityBox"></rect><text transform="translate(50,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-DISCIPLINA-17ed74ad-2ce5-509a-a0d9-16ab72cb11ad" class="er entityLabel">DISCIPLINA</text><rect height="21" width="37.00759506225586" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DISCIPLINA-17ed74ad-2ce5-509a-a0d9-16ab72cb11ad-attr-1-type" class="er entityLabel">int</text><rect height="21" width="37.531646728515625" y="24" x="37.00759506225586" class="er attributeBoxOdd"></rect><text transform="translate(42.00759506225586,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DISCIPLINA-17ed74ad-2ce5-509a-a0d9-16ab72cb11ad-attr-1-name" class="er entityLabel">id</text><rect height="21" width="25.460758209228516" y="24" x="74.53924179077148" class="er attributeBoxOdd"></rect><text transform="translate(79.53924179077148,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DISCIPLINA-17ed74ad-2ce5-509a-a0d9-16ab72cb11ad-attr-1-key" class="er entityLabel">PK</text><rect height="21" width="37.00759506225586" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DISCIPLINA-17ed74ad-2ce5-509a-a0d9-16ab72cb11ad-attr-2-type" class="er entityLabel">string</text><rect height="21" width="37.531646728515625" y="45" x="37.00759506225586" class="er attributeBoxEven"></rect><text transform="translate(42.00759506225586,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DISCIPLINA-17ed74ad-2ce5-509a-a0d9-16ab72cb11ad-attr-2-name" class="er entityLabel">nome</text><rect height="21" width="25.460758209228516" y="45" x="74.53924179077148" class="er attributeBoxEven"></rect><text transform="translate(79.53924179077148,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-DISCIPLINA-17ed74ad-2ce5-509a-a0d9-16ab72cb11ad-attr-2-key" class="er entityLabel"></text></g><g transform="translate(220,20 )" id="entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c"><rect height="87" width="158.06968879699707" y="0" x="0" class="er entityBox"></rect><text transform="translate(79.03484439849854,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c" class="er entityLabel">MATRICULA</text><rect height="21" width="68.7015609741211" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c-attr-1-type" class="er entityLabel">int</text><rect height="21" width="66.12119674682617" y="24" x="68.7015609741211" class="er attributeBoxOdd"></rect><text transform="translate(73.7015609741211,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c-attr-1-name" class="er entityLabel">aluno_id</text><rect height="21" width="23.246931076049805" y="24" x="134.82275772094727" class="er attributeBoxOdd"></rect><text transform="translate(139.82275772094727,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c-attr-1-key" class="er entityLabel">FK</text><rect height="21" width="68.7015609741211" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c-attr-2-type" class="er entityLabel">int</text><rect height="21" width="66.12119674682617" y="45" x="68.7015609741211" class="er attributeBoxEven"></rect><text transform="translate(73.7015609741211,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c-attr-2-name" class="er entityLabel">disciplina_id</text><rect height="21" width="23.246931076049805" y="45" x="134.82275772094727" class="er attributeBoxEven"></rect><text transform="translate(139.82275772094727,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c-attr-2-key" class="er entityLabel">FK</text><rect height="21" width="68.7015609741211" y="66" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c-attr-3-type" class="er entityLabel">ON-DELETE</text><rect height="21" width="66.12119674682617" y="66" x="68.7015609741211" class="er attributeBoxOdd"></rect><text transform="translate(73.7015609741211,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c-attr-3-name" class="er entityLabel">CASCADE</text><rect height="21" width="23.246931076049805" y="66" x="134.82275772094727" class="er attributeBoxOdd"></rect><text transform="translate(139.82275772094727,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-MATRICULA-e3585f72-9807-5252-9de4-e02447a74b7c-attr-3-key" class="er entityLabel"></text></g><rect height="14" width="62.59351348876953" y="144.75" x="38.703243255615234" class="er relationshipLabelBox"></rect><text style="text-anchor: middle; dominant-baseline: middle; font-size: 12px;" y="151.75" x="70" id="rel1110" class="er relationshipLabel">matriculado</text></svg></section></section><section class="chapter"><h2 id="boas-pr-ticas" data-toc="boas-pr-ticas">Boas Pr&aacute;ticas</h2><section class="chapter"><h3 id="1-design-de-esquema" data-toc="1-design-de-esquema">1. Design de Esquema</h3><ul class="list _bullet" id="qhpkkc_59"><li class="list__item" id="qhpkkc_60"><p id="qhpkkc_63">Planeje a&ccedil;&otilde;es referenciais</p></li><li class="list__item" id="qhpkkc_61"><p id="qhpkkc_64">Documente decis&otilde;es</p></li><li class="list__item" id="qhpkkc_62"><p id="qhpkkc_65">Considere impacto em cascata</p></li></ul></section><section class="chapter"><h3 id="2-performance" data-toc="2-performance">2. Performance</h3><ul class="list _bullet" id="qhpkkc_66"><li class="list__item" id="qhpkkc_67"><p id="qhpkkc_70">Use &iacute;ndices apropriados</p></li><li class="list__item" id="qhpkkc_68"><p id="qhpkkc_71">Monitore opera&ccedil;&otilde;es em cascata</p></li><li class="list__item" id="qhpkkc_69"><p id="qhpkkc_72">Otimize consultas relacionadas</p></li></ul></section><section class="chapter"><h3 id="3-manuten-o" data-toc="3-manuten-o">3. Manuten&ccedil;&atilde;o</h3><ul class="list _bullet" id="qhpkkc_73"><li class="list__item" id="qhpkkc_74"><p id="qhpkkc_77">Audite viola&ccedil;&otilde;es</p></li><li class="list__item" id="qhpkkc_75"><p id="qhpkkc_78">Mantenha consist&ecirc;ncia</p></li><li class="list__item" id="qhpkkc_76"><p id="qhpkkc_79">Atualize documenta&ccedil;&atilde;o</p></li></ul></section></section><section class="chapter"><h2 id="tratamento-de-erros" data-toc="tratamento-de-erros">Tratamento de Erros</h2><section class="chapter"><h3 id="1-viola-es-de-integridade" data-toc="1-viola-es-de-integridade">1. Viola&ccedil;&otilde;es de Integridade</h3><div class="code-block" data-lang="sql">
-- Tratamento em transação
BEGIN;
    DELETE FROM Departamento WHERE id = 1;
EXCEPTION WHEN foreign_key_violation THEN
    -- Tratamento do erro
ROLLBACK;
</div></section><section class="chapter"><h3 id="2-valida-es-preventivas" data-toc="2-valida-es-preventivas">2. Valida&ccedil;&otilde;es Preventivas</h3><div class="code-block" data-lang="sql">
-- Verificar antes de deletar
SELECT COUNT(*) FROM Funcionario 
WHERE depto_id = 1;
</div></section></section><section class="chapter"><h2 id="monitoramento" data-toc="monitoramento">Monitoramento</h2><section class="chapter"><h3 id="1-logs-de-viola-o" data-toc="1-logs-de-viola-o">1. Logs de Viola&ccedil;&atilde;o</h3><ul class="list _bullet" id="qhpkkc_86"><li class="list__item" id="qhpkkc_87"><p id="qhpkkc_90">Registre tentativas falhas</p></li><li class="list__item" id="qhpkkc_88"><p id="qhpkkc_91">Analise padr&otilde;es</p></li><li class="list__item" id="qhpkkc_89"><p id="qhpkkc_92">Identifique problemas</p></li></ul></section><section class="chapter"><h3 id="2-m-tricas" data-toc="2-m-tricas">2. M&eacute;tricas</h3><ul class="list _bullet" id="qhpkkc_93"><li class="list__item" id="qhpkkc_94"><p id="qhpkkc_97">Taxa de viola&ccedil;&otilde;es</p></li><li class="list__item" id="qhpkkc_95"><p id="qhpkkc_98">Performance de opera&ccedil;&otilde;es</p></li><li class="list__item" id="qhpkkc_96"><p id="qhpkkc_99">Impacto em cascata</p></li></ul></section></section><section class="chapter"><h2 id="considera-es-avan-adas" data-toc="considera-es-avan-adas">Considera&ccedil;&otilde;es Avan&ccedil;adas</h2><section class="chapter"><h3 id="1-transa-es-distribu-das" data-toc="1-transa-es-distribu-das">1. Transa&ccedil;&otilde;es Distribu&iacute;das</h3><ul class="list _bullet" id="qhpkkc_102"><li class="list__item" id="qhpkkc_103"><p id="qhpkkc_106">Consist&ecirc;ncia entre sistemas</p></li><li class="list__item" id="qhpkkc_104"><p id="qhpkkc_107">Recupera&ccedil;&atilde;o de falhas</p></li><li class="list__item" id="qhpkkc_105"><p id="qhpkkc_108">Sincroniza&ccedil;&atilde;o</p></li></ul></section><section class="chapter"><h3 id="2-replica-o" data-toc="2-replica-o">2. Replica&ccedil;&atilde;o</h3><ul class="list _bullet" id="qhpkkc_109"><li class="list__item" id="qhpkkc_110"><p id="qhpkkc_113">Propaga&ccedil;&atilde;o de mudan&ccedil;as</p></li><li class="list__item" id="qhpkkc_111"><p id="qhpkkc_114">Consist&ecirc;ncia eventual</p></li><li class="list__item" id="qhpkkc_112"><p id="qhpkkc_115">Resolu&ccedil;&atilde;o de conflitos</p></li></ul></section></section><div class="last-modified">25 abril 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="keys-constraints.html" class="navigation-links__prev">Restri&ccedil;&otilde;es de Chave</a><a href="er-to-relational.html" class="navigation-links__next">Transforma&ccedil;&atilde;o ER para Relacional</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>