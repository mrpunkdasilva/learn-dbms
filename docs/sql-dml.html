<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#E8488B"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-04-25T23:35:24.161029289"><title>DML - Linguagem de Manipula&ccedil;&atilde;o de Dados | Database Management Systems: A Complete Guide</title><script type="application/json" id="virtual-toc-data">[{"id":"vis-o-geral","level":0,"title":"Visão Geral","anchor":"#vis-o-geral"},{"id":"comandos-principais","level":0,"title":"Comandos Principais","anchor":"#comandos-principais"},{"id":"boas-pr-ticas","level":0,"title":"Boas Práticas","anchor":"#boas-pr-ticas"},{"id":"padr-es-comuns","level":0,"title":"Padrões Comuns","anchor":"#padr-es-comuns"},{"id":"troubleshooting","level":0,"title":"Troubleshooting","anchor":"#troubleshooting"},{"id":"conclus-o","level":0,"title":"Conclusão","anchor":"#conclus-o"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link href="static/custom.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="images/logo-primary.svg"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="DML - Linguagem de Manipula&ccedil;&atilde;o de Dados | Database Management Systems: A Complete Guide"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Database Management Systems: A Complete Guide Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/sql-dml.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="DML - Linguagem de Manipula&ccedil;&atilde;o de Dados | Database Management Systems: A Complete Guide"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/sql-dml.html#webpage",
    "url": "writerside-documentation/sql-dml.html",
    "name": "DML - Linguagem de Manipula&ccedil;&atilde;o de Dados | Database Management Systems: A Complete Guide",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Database Management Systems: A Complete Guide Help"
}</script><!-- End Schema.org --></head><body data-id="sql-dml" data-main-title="DML - Linguagem de Manipulação de Dados" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="sql-fundamentals.md|Fundamentos SQL"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Database Management Systems: A Complete Guide  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="sql-dml" id="sql-dml.md">DML - Linguagem de Manipulação de Dados</h1><div class="code-block" data-lang="none">
╔══════════════════════════════════════════════════════════════╗
║  DATA_MANIPULATOR &gt;&gt; Operações com Dados                   ║
║  INSTRUTOR: DML_MASTER                                     ║
╚══════════════════════════════════════════════════════════════╝
</div><section class="chapter"><h2 id="vis-o-geral" data-toc="vis-o-geral">Vis&atilde;o Geral</h2><p id="k8gic3_10">DML_MASTER apresenta: &quot;A Linguagem de Manipula&ccedil;&atilde;o de Dados (DML) &eacute; o conjunto de comandos SQL usado para gerenciar dados em um banco de dados.&quot;</p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 821.96875 174"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="821.96875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M363.922,42.143L314.801,49.619C265.68,57.095,167.438,72.048,118.316,81.607C69.195,91.167,69.195,95.333,69.195,98.833C69.195,102.333,69.195,105.167,69.195,106.583L69.195,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_C_1" d="M363.922,49.255L343.211,55.546C322.5,61.836,281.078,74.418,260.367,82.792C239.656,91.167,239.656,95.333,239.656,98.833C239.656,102.333,239.656,105.167,239.656,106.583L239.656,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_D_2" d="M410.852,62L410.852,66.167C410.852,70.333,410.852,78.667,410.852,84.917C410.852,91.167,410.852,95.333,410.852,98.833C410.852,102.333,410.852,105.167,410.852,106.583L410.852,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_E_3" d="M457.781,49.096L478.814,55.413C499.846,61.731,541.911,74.365,562.944,82.766C583.977,91.167,583.977,95.333,583.977,98.833C583.977,102.333,583.977,105.167,583.977,106.583L583.977,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_F_4" d="M457.781,42.1L507.246,49.583C556.711,57.067,655.641,72.033,705.105,81.6C754.57,91.167,754.57,95.333,754.57,98.833C754.57,102.333,754.57,105.167,754.57,106.583L754.57,108"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(410.8515625, 35)" id="flowchart-A-9715" class="node default"><rect height="54" width="93.859375" y="-27" x="-46.9296875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-16.9296875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="33.859375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>DML</p></span></div></foreignObject></g></g><g transform="translate(69.1953125, 139)" id="flowchart-B-9716" class="node default"><rect height="54" width="122.390625" y="-27" x="-61.1953125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-31.1953125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="62.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>SELECT</p></span></div></foreignObject></g></g><g transform="translate(239.65625, 139)" id="flowchart-C-9718" class="node default"><rect height="54" width="118.53125" y="-27" x="-59.265625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-29.265625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="58.53125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>INSERT</p></span></div></foreignObject></g></g><g transform="translate(410.8515625, 139)" id="flowchart-D-9720" class="node default"><rect height="54" width="123.859375" y="-27" x="-61.9296875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-31.9296875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="63.859375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>UPDATE</p></span></div></foreignObject></g></g><g transform="translate(583.9765625, 139)" id="flowchart-E-9722" class="node default"><rect height="54" width="122.390625" y="-27" x="-61.1953125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-31.1953125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="62.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>DELETE</p></span></div></foreignObject></g></g><g transform="translate(754.5703125, 139)" id="flowchart-F-9724" class="node default"><rect height="54" width="118.796875" y="-27" x="-59.3984375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-29.3984375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="58.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>MERGE</p></span></div></foreignObject></g></g></g></g></g></svg></section><section class="chapter"><h2 id="comandos-principais" data-toc="comandos-principais">Comandos Principais</h2><section class="chapter"><h3 id="1-select" data-toc="1-select">1. SELECT</h3><p id="k8gic3_17">DATA_READER explica: &quot;Recupera dados do banco&quot;</p><div class="code-block" data-lang="sql">
-- Consulta básica
SELECT nome, preco 
FROM produtos 
WHERE categoria = 'Eletrônicos';

-- Com joins
SELECT c.nome, p.descricao
FROM clientes c
JOIN pedidos p ON c.id = p.cliente_id;
</div></section><section class="chapter"><h3 id="2-insert" data-toc="2-insert">2. INSERT</h3><p id="k8gic3_19">DATA_WRITER demonstra: &quot;Adiciona novos registros&quot;</p><div class="code-block" data-lang="sql">
-- Inserção simples
INSERT INTO produtos (nome, preco)
VALUES ('Smartphone', 999.99);

-- Inserção múltipla
INSERT INTO produtos (nome, preco)
VALUES 
    ('Tablet', 499.99),
    ('Notebook', 1499.99);
</div></section><section class="chapter"><h3 id="3-update" data-toc="3-update">3. UPDATE</h3><p id="k8gic3_21">DATA_MODIFIER apresenta: &quot;Modifica registros existentes&quot;</p><div class="code-block" data-lang="sql">
-- Atualização simples
UPDATE produtos 
SET preco = preco * 1.1
WHERE categoria = 'Eletrônicos';

-- Atualização com join
UPDATE pedidos p
SET status = 'Aprovado'
FROM clientes c
WHERE p.cliente_id = c.id
AND c.vip = true;
</div></section><section class="chapter"><h3 id="4-delete" data-toc="4-delete">4. DELETE</h3><p id="k8gic3_23">DATA_REMOVER alerta: &quot;Remove registros do banco&quot;</p><div class="code-block" data-lang="sql">
-- Remoção simples
DELETE FROM logs 
WHERE data &lt; CURRENT_DATE - INTERVAL '30 days';

-- Remoção com subquery
DELETE FROM produtos
WHERE id IN (
    SELECT produto_id 
    FROM estoque 
    WHERE quantidade = 0
);
</div></section><section class="chapter"><h3 id="5-merge" data-toc="5-merge">5. MERGE</h3><p id="k8gic3_25">DATA_SYNC_MASTER explica: &quot;Sincroniza dados entre tabelas&quot;</p><div class="code-block" data-lang="sql">
-- Merge básico
MERGE INTO produtos_destino d
USING produtos_origem o
ON (d.id = o.id)
WHEN MATCHED THEN
    UPDATE SET preco = o.preco
WHEN NOT MATCHED THEN
    INSERT (id, nome, preco)
    VALUES (o.id, o.nome, o.preco);
</div></section></section><section class="chapter"><h2 id="boas-pr-ticas" data-toc="boas-pr-ticas">Boas Pr&aacute;ticas</h2><p id="k8gic3_27">BEST_PRACTICE_GURU compartilha:</p><section class="chapter"><h3 id="1-performance" data-toc="1-performance">1. Performance</h3><ul class="list _bullet" id="k8gic3_31"><li class="list__item" id="k8gic3_32"><p id="k8gic3_36">Use &iacute;ndices apropriados</p></li><li class="list__item" id="k8gic3_33"><p id="k8gic3_37">Evite SELECT *</p></li><li class="list__item" id="k8gic3_34"><p id="k8gic3_38">Otimize JOINs</p></li><li class="list__item" id="k8gic3_35"><p id="k8gic3_39">Limite resultados quando poss&iacute;vel</p></li></ul></section><section class="chapter"><h3 id="2-seguran-a" data-toc="2-seguran-a">2. Seguran&ccedil;a</h3><ul class="list _bullet" id="k8gic3_40"><li class="list__item" id="k8gic3_41"><p id="k8gic3_45">Use transa&ccedil;&otilde;es</p></li><li class="list__item" id="k8gic3_42"><p id="k8gic3_46">Valide dados de entrada</p></li><li class="list__item" id="k8gic3_43"><p id="k8gic3_47">Fa&ccedil;a backup antes de opera&ccedil;&otilde;es grandes</p></li><li class="list__item" id="k8gic3_44"><p id="k8gic3_48">Use WHERE em UPDATE/DELETE</p></li></ul></section><section class="chapter"><h3 id="3-manuten-o" data-toc="3-manuten-o">3. Manuten&ccedil;&atilde;o</h3><ul class="list _bullet" id="k8gic3_49"><li class="list__item" id="k8gic3_51"><p id="k8gic3_55">Documente queries complexas</p></li><li class="list__item" id="k8gic3_52"><p id="k8gic3_56">Use aliases descritivos</p></li><li class="list__item" id="k8gic3_53"><p id="k8gic3_57">Mantenha consist&ecirc;ncia no estilo</p></li><li class="list__item" id="k8gic3_54"><p id="k8gic3_58">Implemente logging quando necess&aacute;rio</p></li></ul><div class="code-block" data-lang="none">
╔════════════════════════════════════════════╗
║  CHECKLIST DML:                           ║
║  □ Índices verificados?                   ║
║  □ Transação necessária?                  ║
║  □ WHERE clause adequada?                 ║
║  □ Performance otimizada?                 ║
║  □ Backup realizado?                      ║
╚════════════════════════════════════════════╝
</div></section></section><section class="chapter"><h2 id="padr-es-comuns" data-toc="padr-es-comuns">Padr&otilde;es Comuns</h2><p id="k8gic3_59">PATTERN_MASTER apresenta padr&otilde;es &uacute;teis:</p><section class="chapter"><h3 id="1-upsert" data-toc="1-upsert">1. Upsert</h3><div class="code-block" data-lang="sql">
INSERT INTO produtos (id, nome, preco)
VALUES (1, 'Smartphone', 999.99)
ON CONFLICT (id) 
DO UPDATE SET preco = EXCLUDED.preco;
</div></section><section class="chapter"><h3 id="2-soft-delete" data-toc="2-soft-delete">2. Soft Delete</h3><div class="code-block" data-lang="sql">
-- Em vez de DELETE
UPDATE usuarios
SET ativo = false,
    data_inativacao = CURRENT_TIMESTAMP
WHERE id = 123;
</div></section><section class="chapter"><h3 id="3-batch-processing" data-toc="3-batch-processing">3. Batch Processing</h3><div class="code-block" data-lang="sql">
-- Processamento em lotes
WITH batch AS (
    SELECT id 
    FROM pedidos 
    WHERE status = 'Pendente' 
    LIMIT 1000
    FOR UPDATE SKIP LOCKED
)
UPDATE pedidos p
SET status = 'Processando'
FROM batch b
WHERE p.id = b.id;
</div></section></section><section class="chapter"><h2 id="troubleshooting" data-toc="troubleshooting">Troubleshooting</h2><p id="k8gic3_66">ERROR_HANDLER apresenta solu&ccedil;&otilde;es para problemas comuns:</p><section class="chapter"><h3 id="1-deadlocks" data-toc="1-deadlocks">1. Deadlocks</h3><div class="code-block" data-lang="sql">
-- Verificando bloqueios
SELECT blocked_locks.pid AS blocked_pid,
       blocking_locks.pid AS blocking_pid
FROM pg_catalog.pg_locks blocked_locks
JOIN pg_catalog.pg_locks blocking_locks 
    ON blocking_locks.locktype = blocked_locks.locktype;
</div></section><section class="chapter"><h3 id="2-performance-issues" data-toc="2-performance-issues">2. Performance Issues</h3><div class="code-block" data-lang="sql">
-- Analisando query
EXPLAIN ANALYZE
SELECT * FROM produtos p
JOIN categorias c ON p.categoria_id = c.id
WHERE p.preco &gt; 100;
</div></section></section><section class="chapter"><h2 id="conclus-o" data-toc="conclus-o">Conclus&atilde;o</h2><p id="k8gic3_71">DML_MASTER conclui: &quot;O dom&iacute;nio dos comandos DML &eacute; essencial para qualquer desenvolvedor de banco de dados. Use-os com sabedoria e sempre considere performance e seguran&ccedil;a.&quot;</p><aside class="prompt" data-type="tip" data-title="" id="k8gic3_72"><p id="k8gic3_73"><span class="control" id="k8gic3_74">Dica Final</span>: Mantenha um ambiente de testes para praticar opera&ccedil;&otilde;es DML complexas antes de execut&aacute;-las em produ&ccedil;&atilde;o.</p></aside></section><div class="last-modified">26 abril 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="truncate-statements.html" class="navigation-links__prev">TRUNCATE: Limpeza R&aacute;pida de Dados</a><a href="select-statements.html" class="navigation-links__next">SELECT: Recuperando Dados</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>