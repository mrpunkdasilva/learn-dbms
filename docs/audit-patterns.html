<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#E8488B"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-06-08T20:14:46.066061111"><title>Padr&otilde;es de Auditoria | Database Management Systems: A Complete Guide</title><script type="application/json" id="virtual-toc-data">[{"id":"log-de-altera-es","level":0,"title":"Log de Alterações","anchor":"#log-de-altera-es"},{"id":"trilha-de-auditoria","level":0,"title":"Trilha de Auditoria","anchor":"#trilha-de-auditoria"},{"id":"snapshot","level":0,"title":"Snapshot","anchor":"#snapshot"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link href="static/custom.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="images/logo-primary.svg"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Padr&otilde;es de Auditoria | Database Management Systems: A Complete Guide"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Database Management Systems: A Complete Guide Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/audit-patterns.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Padr&otilde;es de Auditoria | Database Management Systems: A Complete Guide"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/audit-patterns.html#webpage",
    "url": "writerside-documentation/audit-patterns.html",
    "name": "Padr&otilde;es de Auditoria | Database Management Systems: A Complete Guide",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Database Management Systems: A Complete Guide Help"
}</script><!-- End Schema.org --></head><body data-id="audit-patterns" data-main-title="Padrões de Auditoria" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="data-modeling.md|Modelagem de Dados///data-modeling-patterns.md|Padrões de Modelagem de Dados"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Database Management Systems: A Complete Guide  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="audit-patterns" id="audit-patterns.md">Padrões de Auditoria</h1><section class="chapter"><h2 id="log-de-altera-es" data-toc="log-de-altera-es">Log de Altera&ccedil;&otilde;es</h2><svg aria-roledescription="er" role="graphics-document document" viewBox="0 0 199.3818817138672 419" style="max-width: 199.3818817138672px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="0" id="MD_PARENT_START"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="19" id="MD_PARENT_END"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="18" refY="9" refX="0" id="ONLY_ONE_START"><path d="M9,0 L9,18 M15,0 L15,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="18" refY="9" refX="18" id="ONLY_ONE_END"><path d="M3,0 L3,18 M9,0 L9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="30" refY="9" refX="0" id="ZERO_OR_ONE_START"><circle r="6" cy="9" cx="21" fill="white" stroke="gray"></circle><path d="M9,0 L9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="30" refY="9" refX="30" id="ZERO_OR_ONE_END"><circle r="6" cy="9" cx="9" fill="white" stroke="gray"></circle><path d="M21,0 L21,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="45" refY="18" refX="18" id="ONE_OR_MORE_START"><path d="M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="45" refY="18" refX="27" id="ONE_OR_MORE_END"><path d="M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="57" refY="18" refX="18" id="ZERO_OR_MORE_START"><circle r="6" cy="18" cx="48" fill="white" stroke="gray"></circle><path d="M0,18 Q18,0 36,18 Q18,36 0,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="57" refY="18" refX="39" id="ZERO_OR_MORE_END"><circle r="6" cy="18" cx="9" fill="white" stroke="gray"></circle><path d="M21,18 Q39,0 57,18 Q39,36 21,18" fill="none" stroke="gray"></path></marker></defs><path style="stroke: gray; fill: none;" marker-start="url(#ONLY_ONE_START)" marker-end="url(#ZERO_OR_MORE_END)" d="M99.691,107L99.691,115.333C99.691,123.667,99.691,140.333,99.691,157C99.691,173.667,99.691,190.333,99.691,198.667L99.691,207" class="er relationshipLine"></path><g transform="translate(49.690940856933594,20 )" id="entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e"><rect height="87" width="100" y="0" x="0" class="er entityBox"></rect><text transform="translate(50,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e" class="er entityLabel">ENTIDADE</text><rect height="21" width="36.52817726135254" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e-attr-1-type" class="er entityLabel">int</text><rect height="21" width="38.490482330322266" y="24" x="36.52817726135254" class="er attributeBoxOdd"></rect><text transform="translate(41.52817726135254,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e-attr-1-name" class="er entityLabel">id</text><rect height="21" width="24.981340408325195" y="24" x="75.0186595916748" class="er attributeBoxOdd"></rect><text transform="translate(80.0186595916748,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e-attr-1-key" class="er entityLabel">PK</text><rect height="21" width="36.52817726135254" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e-attr-2-type" class="er entityLabel">string</text><rect height="21" width="38.490482330322266" y="45" x="36.52817726135254" class="er attributeBoxEven"></rect><text transform="translate(41.52817726135254,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e-attr-2-name" class="er entityLabel">nome</text><rect height="21" width="24.981340408325195" y="45" x="75.0186595916748" class="er attributeBoxEven"></rect><text transform="translate(80.0186595916748,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e-attr-2-key" class="er entityLabel"></text><rect height="21" width="36.52817726135254" y="66" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e-attr-3-type" class="er entityLabel">string</text><rect height="21" width="38.490482330322266" y="66" x="36.52817726135254" class="er attributeBoxOdd"></rect><text transform="translate(41.52817726135254,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e-attr-3-name" class="er entityLabel">status</text><rect height="21" width="24.981340408325195" y="66" x="75.0186595916748" class="er attributeBoxOdd"></rect><text transform="translate(80.0186595916748,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-ENTIDADE-4a350985-f03b-5a98-874e-d34390b9d33e-attr-3-key" class="er entityLabel"></text></g><g transform="translate(20,207 )" id="entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c"><rect height="192" width="159.38187980651855" y="0" x="0" class="er entityBox"></rect><text transform="translate(79.69093990325928,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c" class="er entityLabel">LOG_ALTERACAO</text><rect height="21" width="57.51405334472656" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-1-type" class="er entityLabel">int</text><rect height="21" width="78.04884338378906" y="24" x="57.51405334472656" class="er attributeBoxOdd"></rect><text transform="translate(62.51405334472656,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-1-name" class="er entityLabel">id</text><rect height="21" width="23.81898307800293" y="24" x="135.56289672851562" class="er attributeBoxOdd"></rect><text transform="translate(140.56289672851562,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-1-key" class="er entityLabel">PK</text><rect height="21" width="57.51405334472656" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-2-type" class="er entityLabel">string</text><rect height="21" width="78.04884338378906" y="45" x="57.51405334472656" class="er attributeBoxEven"></rect><text transform="translate(62.51405334472656,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-2-name" class="er entityLabel">tabela</text><rect height="21" width="23.81898307800293" y="45" x="135.56289672851562" class="er attributeBoxEven"></rect><text transform="translate(140.56289672851562,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-2-key" class="er entityLabel"></text><rect height="21" width="57.51405334472656" y="66" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-3-type" class="er entityLabel">int</text><rect height="21" width="78.04884338378906" y="66" x="57.51405334472656" class="er attributeBoxOdd"></rect><text transform="translate(62.51405334472656,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-3-name" class="er entityLabel">registro_id</text><rect height="21" width="23.81898307800293" y="66" x="135.56289672851562" class="er attributeBoxOdd"></rect><text transform="translate(140.56289672851562,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-3-key" class="er entityLabel"></text><rect height="21" width="57.51405334472656" y="87" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-4-type" class="er entityLabel">string</text><rect height="21" width="78.04884338378906" y="87" x="57.51405334472656" class="er attributeBoxEven"></rect><text transform="translate(62.51405334472656,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-4-name" class="er entityLabel">campo</text><rect height="21" width="23.81898307800293" y="87" x="135.56289672851562" class="er attributeBoxEven"></rect><text transform="translate(140.56289672851562,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-4-key" class="er entityLabel"></text><rect height="21" width="57.51405334472656" y="108" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,118.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-5-type" class="er entityLabel">string</text><rect height="21" width="78.04884338378906" y="108" x="57.51405334472656" class="er attributeBoxOdd"></rect><text transform="translate(62.51405334472656,118.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-5-name" class="er entityLabel">valor_anterior</text><rect height="21" width="23.81898307800293" y="108" x="135.56289672851562" class="er attributeBoxOdd"></rect><text transform="translate(140.56289672851562,118.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-5-key" class="er entityLabel"></text><rect height="21" width="57.51405334472656" y="129" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,139.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-6-type" class="er entityLabel">string</text><rect height="21" width="78.04884338378906" y="129" x="57.51405334472656" class="er attributeBoxEven"></rect><text transform="translate(62.51405334472656,139.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-6-name" class="er entityLabel">valor_novo</text><rect height="21" width="23.81898307800293" y="129" x="135.56289672851562" class="er attributeBoxEven"></rect><text transform="translate(140.56289672851562,139.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-6-key" class="er entityLabel"></text><rect height="21" width="57.51405334472656" y="150" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,160.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-7-type" class="er entityLabel">timestamp</text><rect height="21" width="78.04884338378906" y="150" x="57.51405334472656" class="er attributeBoxOdd"></rect><text transform="translate(62.51405334472656,160.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-7-name" class="er entityLabel">data_alteracao</text><rect height="21" width="23.81898307800293" y="150" x="135.56289672851562" class="er attributeBoxOdd"></rect><text transform="translate(140.56289672851562,160.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-7-key" class="er entityLabel"></text><rect height="21" width="57.51405334472656" y="171" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,181.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-8-type" class="er entityLabel">string</text><rect height="21" width="78.04884338378906" y="171" x="57.51405334472656" class="er attributeBoxEven"></rect><text transform="translate(62.51405334472656,181.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-8-name" class="er entityLabel">usuario</text><rect height="21" width="23.81898307800293" y="171" x="135.56289672851562" class="er attributeBoxEven"></rect><text transform="translate(140.56289672851562,181.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-LOGALTERACAO-6ae7c018-2e0a-50c9-9e6d-3448c31cb54c-attr-8-key" class="er entityLabel"></text></g><rect height="14" width="40.507843017578125" y="150" x="79.43708038330078" class="er relationshipLabelBox"></rect><text style="text-anchor: middle; dominant-baseline: middle; font-size: 12px;" y="157" x="99.69100189208984" id="rel605" class="er relationshipLabel">registra</text></svg><section class="chapter"><h3 id="implementa-o" data-toc="implementa-o">Implementa&ccedil;&atilde;o</h3><div class="code-block" data-lang="sql">
CREATE TABLE log_alteracao (
    id INT PRIMARY KEY,
    tabela VARCHAR(50),
    registro_id INT,
    campo VARCHAR(50),
    valor_anterior TEXT,
    valor_novo TEXT,
    data_alteracao TIMESTAMP,
    usuario VARCHAR(50)
);

-- Trigger de exemplo
CREATE TRIGGER tr_audit_entidade
AFTER UPDATE ON entidade
FOR EACH ROW
INSERT INTO log_alteracao (
    tabela, registro_id, campo, 
    valor_anterior, valor_novo, 
    data_alteracao, usuario
) VALUES (
    'entidade', NEW.id, 'status',
    OLD.status, NEW.status,
    CURRENT_TIMESTAMP, CURRENT_USER
);
</div></section></section><section class="chapter"><h2 id="trilha-de-auditoria" data-toc="trilha-de-auditoria">Trilha de Auditoria</h2><svg aria-roledescription="er" role="graphics-document document" viewBox="0 0 187.9882354736328 377" style="max-width: 187.9882354736328px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="0" id="MD_PARENT_START"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="19" id="MD_PARENT_END"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="18" refY="9" refX="0" id="ONLY_ONE_START"><path d="M9,0 L9,18 M15,0 L15,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="18" refY="9" refX="18" id="ONLY_ONE_END"><path d="M3,0 L3,18 M9,0 L9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="30" refY="9" refX="0" id="ZERO_OR_ONE_START"><circle r="6" cy="9" cx="21" fill="white" stroke="gray"></circle><path d="M9,0 L9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="30" refY="9" refX="30" id="ZERO_OR_ONE_END"><circle r="6" cy="9" cx="9" fill="white" stroke="gray"></circle><path d="M21,0 L21,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="45" refY="18" refX="18" id="ONE_OR_MORE_START"><path d="M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="45" refY="18" refX="27" id="ONE_OR_MORE_END"><path d="M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="57" refY="18" refX="18" id="ZERO_OR_MORE_START"><circle r="6" cy="18" cx="48" fill="white" stroke="gray"></circle><path d="M0,18 Q18,0 36,18 Q18,36 0,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="57" refY="18" refX="39" id="ZERO_OR_MORE_END"><circle r="6" cy="18" cx="9" fill="white" stroke="gray"></circle><path d="M21,18 Q39,0 57,18 Q39,36 21,18" fill="none" stroke="gray"></path></marker></defs><path style="stroke: gray; fill: none;" marker-start="url(#ONLY_ONE_START)" marker-end="url(#ZERO_OR_MORE_END)" d="M93.994,107L93.994,115.333C93.994,123.667,93.994,140.333,93.994,157C93.994,173.667,93.994,190.333,93.994,198.667L93.994,207" class="er relationshipLine"></path><g transform="translate(43.994117736816406,20 )" id="entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0"><rect height="87" width="100" y="0" x="0" class="er entityBox"></rect><text transform="translate(50,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0" class="er entityLabel">PEDIDO</text><rect height="21" width="36.52817726135254" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0-attr-1-type" class="er entityLabel">int</text><rect height="21" width="38.490482330322266" y="24" x="36.52817726135254" class="er attributeBoxOdd"></rect><text transform="translate(41.52817726135254,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0-attr-1-name" class="er entityLabel">id</text><rect height="21" width="24.981340408325195" y="24" x="75.0186595916748" class="er attributeBoxOdd"></rect><text transform="translate(80.0186595916748,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0-attr-1-key" class="er entityLabel">PK</text><rect height="21" width="36.52817726135254" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0-attr-2-type" class="er entityLabel">float</text><rect height="21" width="38.490482330322266" y="45" x="36.52817726135254" class="er attributeBoxEven"></rect><text transform="translate(41.52817726135254,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0-attr-2-name" class="er entityLabel">valor</text><rect height="21" width="24.981340408325195" y="45" x="75.0186595916748" class="er attributeBoxEven"></rect><text transform="translate(80.0186595916748,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0-attr-2-key" class="er entityLabel"></text><rect height="21" width="36.52817726135254" y="66" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0-attr-3-type" class="er entityLabel">string</text><rect height="21" width="38.490482330322266" y="66" x="36.52817726135254" class="er attributeBoxOdd"></rect><text transform="translate(41.52817726135254,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0-attr-3-name" class="er entityLabel">status</text><rect height="21" width="24.981340408325195" y="66" x="75.0186595916748" class="er attributeBoxOdd"></rect><text transform="translate(80.0186595916748,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-PEDIDO-79609d0a-2a15-5826-829f-bc409be443d0-attr-3-key" class="er entityLabel"></text></g><g transform="translate(20,207 )" id="entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614"><rect height="150" width="147.9882297515869" y="0" x="0" class="er entityBox"></rect><text transform="translate(73.99411487579346,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614" class="er entityLabel">EVENTO_PEDIDO</text><rect height="21" width="57.51405334472656" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-1-type" class="er entityLabel">int</text><rect height="21" width="66.65519332885742" y="24" x="57.51405334472656" class="er attributeBoxOdd"></rect><text transform="translate(62.51405334472656,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-1-name" class="er entityLabel">id</text><rect height="21" width="23.81898307800293" y="24" x="124.16924667358398" class="er attributeBoxOdd"></rect><text transform="translate(129.16924667358398,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-1-key" class="er entityLabel">PK</text><rect height="21" width="57.51405334472656" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-2-type" class="er entityLabel">int</text><rect height="21" width="66.65519332885742" y="45" x="57.51405334472656" class="er attributeBoxEven"></rect><text transform="translate(62.51405334472656,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-2-name" class="er entityLabel">pedido_id</text><rect height="21" width="23.81898307800293" y="45" x="124.16924667358398" class="er attributeBoxEven"></rect><text transform="translate(129.16924667358398,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-2-key" class="er entityLabel">FK</text><rect height="21" width="57.51405334472656" y="66" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-3-type" class="er entityLabel">string</text><rect height="21" width="66.65519332885742" y="66" x="57.51405334472656" class="er attributeBoxOdd"></rect><text transform="translate(62.51405334472656,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-3-name" class="er entityLabel">tipo_evento</text><rect height="21" width="23.81898307800293" y="66" x="124.16924667358398" class="er attributeBoxOdd"></rect><text transform="translate(129.16924667358398,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-3-key" class="er entityLabel"></text><rect height="21" width="57.51405334472656" y="87" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-4-type" class="er entityLabel">string</text><rect height="21" width="66.65519332885742" y="87" x="57.51405334472656" class="er attributeBoxEven"></rect><text transform="translate(62.51405334472656,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-4-name" class="er entityLabel">descricao</text><rect height="21" width="23.81898307800293" y="87" x="124.16924667358398" class="er attributeBoxEven"></rect><text transform="translate(129.16924667358398,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-4-key" class="er entityLabel"></text><rect height="21" width="57.51405334472656" y="108" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,118.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-5-type" class="er entityLabel">timestamp</text><rect height="21" width="66.65519332885742" y="108" x="57.51405334472656" class="er attributeBoxOdd"></rect><text transform="translate(62.51405334472656,118.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-5-name" class="er entityLabel">data_evento</text><rect height="21" width="23.81898307800293" y="108" x="124.16924667358398" class="er attributeBoxOdd"></rect><text transform="translate(129.16924667358398,118.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-5-key" class="er entityLabel"></text><rect height="21" width="57.51405334472656" y="129" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,139.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-6-type" class="er entityLabel">string</text><rect height="21" width="66.65519332885742" y="129" x="57.51405334472656" class="er attributeBoxEven"></rect><text transform="translate(62.51405334472656,139.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-6-name" class="er entityLabel">usuario</text><rect height="21" width="23.81898307800293" y="129" x="124.16924667358398" class="er attributeBoxEven"></rect><text transform="translate(129.16924667358398,139.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-EVENTOPEDIDO-b0dada35-d5eb-5293-86ea-a1e612005614-attr-6-key" class="er entityLabel"></text></g><rect height="14" width="40.507843017578125" y="150" x="73.74008178710938" class="er relationshipLabelBox"></rect><text style="text-anchor: middle; dominant-baseline: middle; font-size: 12px;" y="157" x="93.99400329589844" id="rel610" class="er relationshipLabel">registra</text></svg><section class="chapter"><h3 id="implementa-o" data-toc="implementa-o">Implementa&ccedil;&atilde;o</h3><div class="code-block" data-lang="sql">
CREATE TABLE evento_pedido (
    id INT PRIMARY KEY,
    pedido_id INT,
    tipo_evento VARCHAR(50),
    descricao TEXT,
    data_evento TIMESTAMP,
    usuario VARCHAR(50),
    FOREIGN KEY (pedido_id) REFERENCES pedido(id)
);
</div></section></section><section class="chapter"><h2 id="snapshot" data-toc="snapshot">Snapshot</h2><svg aria-roledescription="er" role="graphics-document document" viewBox="0 0 184.140625 356" style="max-width: 184.140625px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="0" id="MD_PARENT_START"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="19" id="MD_PARENT_END"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="18" refY="9" refX="0" id="ONLY_ONE_START"><path d="M9,0 L9,18 M15,0 L15,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="18" refY="9" refX="18" id="ONLY_ONE_END"><path d="M3,0 L3,18 M9,0 L9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="30" refY="9" refX="0" id="ZERO_OR_ONE_START"><circle r="6" cy="9" cx="21" fill="white" stroke="gray"></circle><path d="M9,0 L9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="18" markerWidth="30" refY="9" refX="30" id="ZERO_OR_ONE_END"><circle r="6" cy="9" cx="9" fill="white" stroke="gray"></circle><path d="M21,0 L21,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="45" refY="18" refX="18" id="ONE_OR_MORE_START"><path d="M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="45" refY="18" refX="27" id="ONE_OR_MORE_END"><path d="M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="57" refY="18" refX="18" id="ZERO_OR_MORE_START"><circle r="6" cy="18" cx="48" fill="white" stroke="gray"></circle><path d="M0,18 Q18,0 36,18 Q18,36 0,18" fill="none" stroke="gray"></path></marker></defs><defs><marker orient="auto" markerHeight="36" markerWidth="57" refY="18" refX="39" id="ZERO_OR_MORE_END"><circle r="6" cy="18" cx="9" fill="white" stroke="gray"></circle><path d="M21,18 Q39,0 57,18 Q39,36 21,18" fill="none" stroke="gray"></path></marker></defs><path style="stroke: gray; fill: none;" marker-start="url(#ONLY_ONE_START)" marker-end="url(#ZERO_OR_MORE_END)" d="M92.07,107L92.07,115.333C92.07,123.667,92.07,140.333,92.07,157C92.07,173.667,92.07,190.333,92.07,198.667L92.07,207" class="er relationshipLine"></path><g transform="translate(31.28260040283203,20 )" id="entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c"><rect height="87" width="121.5754280090332" y="0" x="0" class="er entityBox"></rect><text transform="translate(60.7877140045166,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c" class="er entityLabel">CONTA</text><rect height="21" width="35.36581993103027" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c-attr-1-type" class="er entityLabel">int</text><rect height="21" width="62.390625" y="24" x="35.36581993103027" class="er attributeBoxOdd"></rect><text transform="translate(40.36581993103027,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c-attr-1-name" class="er entityLabel">id</text><rect height="21" width="23.81898307800293" y="24" x="97.75644493103027" class="er attributeBoxOdd"></rect><text transform="translate(102.75644493103027,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c-attr-1-key" class="er entityLabel">PK</text><rect height="21" width="35.36581993103027" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c-attr-2-type" class="er entityLabel">float</text><rect height="21" width="62.390625" y="45" x="35.36581993103027" class="er attributeBoxEven"></rect><text transform="translate(40.36581993103027,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c-attr-2-name" class="er entityLabel">saldo_atual</text><rect height="21" width="23.81898307800293" y="45" x="97.75644493103027" class="er attributeBoxEven"></rect><text transform="translate(102.75644493103027,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c-attr-2-key" class="er entityLabel"></text><rect height="21" width="35.36581993103027" y="66" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c-attr-3-type" class="er entityLabel">string</text><rect height="21" width="62.390625" y="66" x="35.36581993103027" class="er attributeBoxOdd"></rect><text transform="translate(40.36581993103027,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c-attr-3-name" class="er entityLabel">status</text><rect height="21" width="23.81898307800293" y="66" x="97.75644493103027" class="er attributeBoxOdd"></rect><text transform="translate(102.75644493103027,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-CONTA-94bf538f-f470-5313-aa3d-ae61e429af8c-attr-3-key" class="er entityLabel"></text></g><g transform="translate(20,207 )" id="entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd"><rect height="129" width="144.140625" y="0" x="0" class="er entityBox"></rect><text transform="translate(72.0703125,12)" style="dominant-baseline: middle; text-anchor: middle; font-size: 12px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd" class="er entityLabel">SNAPSHOT_CONTA</text><rect height="21" width="37.91838010152181" y="24" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-1-type" class="er entityLabel">int</text><rect height="21" width="79.85070164998372" y="24" x="37.91838010152181" class="er attributeBoxOdd"></rect><text transform="translate(42.91838010152181,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-1-name" class="er entityLabel">id</text><rect height="21" width="26.371543248494465" y="24" x="117.76908175150552" class="er attributeBoxOdd"></rect><text transform="translate(122.76908175150552,34.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-1-key" class="er entityLabel">PK</text><rect height="21" width="37.91838010152181" y="45" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-2-type" class="er entityLabel">int</text><rect height="21" width="79.85070164998372" y="45" x="37.91838010152181" class="er attributeBoxEven"></rect><text transform="translate(42.91838010152181,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-2-name" class="er entityLabel">conta_id</text><rect height="21" width="26.371543248494465" y="45" x="117.76908175150552" class="er attributeBoxEven"></rect><text transform="translate(122.76908175150552,55.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-2-key" class="er entityLabel">FK</text><rect height="21" width="37.91838010152181" y="66" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-3-type" class="er entityLabel">float</text><rect height="21" width="79.85070164998372" y="66" x="37.91838010152181" class="er attributeBoxOdd"></rect><text transform="translate(42.91838010152181,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-3-name" class="er entityLabel">saldo</text><rect height="21" width="26.371543248494465" y="66" x="117.76908175150552" class="er attributeBoxOdd"></rect><text transform="translate(122.76908175150552,76.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-3-key" class="er entityLabel"></text><rect height="21" width="37.91838010152181" y="87" x="0" class="er attributeBoxEven"></rect><text transform="translate(5,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-4-type" class="er entityLabel">string</text><rect height="21" width="79.85070164998372" y="87" x="37.91838010152181" class="er attributeBoxEven"></rect><text transform="translate(42.91838010152181,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-4-name" class="er entityLabel">status</text><rect height="21" width="26.371543248494465" y="87" x="117.76908175150552" class="er attributeBoxEven"></rect><text transform="translate(122.76908175150552,97.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-4-key" class="er entityLabel"></text><rect height="21" width="37.91838010152181" y="108" x="0" class="er attributeBoxOdd"></rect><text transform="translate(5,118.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-5-type" class="er entityLabel">date</text><rect height="21" width="79.85070164998372" y="108" x="37.91838010152181" class="er attributeBoxOdd"></rect><text transform="translate(42.91838010152181,118.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-5-name" class="er entityLabel">data_snapshot</text><rect height="21" width="26.371543248494465" y="108" x="117.76908175150552" class="er attributeBoxOdd"></rect><text transform="translate(122.76908175150552,118.5)" style="dominant-baseline: middle; font-size: 10.2px;" y="0" x="0" id="text-entity-SNAPSHOTCONTA-77f5f610-3d8a-5bcf-a5aa-139bab2d30dd-attr-5-key" class="er entityLabel"></text></g><rect height="14" width="40.507843017578125" y="150" x="71.81607818603516" class="er relationshipLabelBox"></rect><text style="text-anchor: middle; dominant-baseline: middle; font-size: 12px;" y="157" x="92.06999969482422" id="rel614" class="er relationshipLabel">registra</text></svg><section class="chapter"><h3 id="implementa-o" data-toc="implementa-o">Implementa&ccedil;&atilde;o</h3><div class="code-block" data-lang="sql">
CREATE TABLE snapshot_conta (
    id INT PRIMARY KEY,
    conta_id INT,
    saldo DECIMAL(10,2),
    status VARCHAR(20),
    data_snapshot DATE,
    FOREIGN KEY (conta_id) REFERENCES conta(id)
);

-- Procedure para criar snapshot
CREATE PROCEDURE criar_snapshot_diario()
BEGIN
    INSERT INTO snapshot_conta (
        conta_id, saldo, status, data_snapshot
    )
    SELECT 
        id, saldo_atual, status, CURRENT_DATE
    FROM conta;
END;
</div></section></section><div class="last-modified">26 abril 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="temporal-patterns.html" class="navigation-links__prev">Padr&otilde;es Temporais</a><a href="sql-fundamentals.html" class="navigation-links__next">Fundamentos SQL</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>